'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var client = require('@trpc/client');
var shared = require('@trpc/server/shared');
var React = require('react');

/// <reference types="next" />
// ts-prune-ignore-next
function experimental_createTRPCNextAppDirServer(opts) {
    const getClient = React.cache(()=>{
        const config = opts.config();
        return client.createTRPCUntypedClient(config);
    });
    return shared.createRecursiveProxy((callOpts)=>{
        // lazily initialize client
        const client$1 = getClient();
        const pathCopy = [
            ...callOpts.path
        ];
        const procedureType = client.clientCallTypeToProcedureType(pathCopy.pop());
        const fullPath = pathCopy.join('.');
        return client$1[procedureType](fullPath, ...callOpts.args);
    });
}

exports.experimental_createTRPCNextAppDirServer = experimental_createTRPCNextAppDirServer;
